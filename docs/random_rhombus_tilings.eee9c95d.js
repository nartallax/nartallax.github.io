function t(t,e,o,r){Object.defineProperty(t,e,{get:o,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var o=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirebf86;o.register("9JVPX",(function(e,r){t(e.exports,"main",(()=>d));var n=o("elQpM"),i=o("kFpLY"),s=o("efatB"),l=o("8HcCf"),h=o("kxLP6");const a=[5487617,16771843,16754689,16333341,14817887,5712994,10603731,26776];function d(t){(0,h.getWasmRhombusRandomiser)().then((t=>console.log(t.addTwoNumbers(2,3)))),l.performeter.enterBlock("initializing");const e=(0,i.getEmptyRhombusPattern)({width:25,height:25,length:25});l.performeter.exitEnterBlock("randomizing"),(0,i.tileWithRandomRhombuses)(e),l.performeter.exitEnterBlock("drawing");const o=a[Math.floor(Math.random()*a.length)],r=(0,n.renderRhombuses)({horisontalColor:(0,s.transformColorHsl)(o,(([t,e,o])=>[t,1.1*e,o])),leftColor:(0,s.transformColorHsl)(o,(([t,e,o])=>[t,.9*e,.9*o])),rightColor:(0,s.transformColorHsl)(o,(([t,e,o])=>[t,.9*e,.8*o])),cellSize:{x:10,y:10},grid:e});r.style.margin="100px 500px",t.appendChild(r),l.performeter.exitBlock(),l.performeter.print()}})),o.register("elQpM",(function(e,r){t(e.exports,"renderRhombuses",(()=>s));var n=o("efatB"),i=o("aCP3q");const s=t=>{const e=t.grid,o=(0,i.svgTag)({tagName:"svg"});o.setAttribute("width",e.xWidth+""),o.setAttribute("height",e.yHeight+""),o.setAttribute("viewBox",`-1 -1 ${e.xWidth+1} ${e.yHeight+.5}`),o.style.width=(e.xWidth+1)*t.cellSize.x+"px",o.style.height=(e.yHeight+.5)*t.cellSize.y+"px";const r=2/(t.cellSize.x+t.cellSize.y),s=(t,o)=>(s,l)=>{let h=e.getVerticalOffset(Math.max(0,Math.min(e.xWidth-1,s)));return(s<0||s>=e.xWidth)&&(h+=.5),(0,i.svgTag)({tagName:"path",attrs:{d:o(s,l+h),fill:(0,n.rgbNumberToColorString)(t),stroke:(0,n.rgbNumberToColorString)(t),"stroke-width":r}})},l=s(t.leftColor,((t,e)=>`M ${t} ${e} V ${e-1} L ${t-1} ${e-.5} V ${e+.5} z`)),h=s(t.rightColor,((t,e)=>`M ${t} ${e} V ${e-1} L ${t+1} ${e-.5} V ${e+.5} z`)),a=s(t.horisontalColor,((t,e)=>`M ${t} ${e} L ${t-1} ${e+.5} L ${t} ${e+1} L ${t+1} ${e+.5} z`));for(const{x:e,y:r,value:{leftIsSolid:n,rightIsSolid:i,bottomIsSolid:s}}of t.grid)n&&o.appendChild(l(e,r)),i&&o.appendChild(h(e,r)),s&&o.appendChild(a(e,r));return e.exploreFrom(e.getTopCornerCoords(),(t=>(e.get(t).leftIsSolid||o.appendChild(a(t.x,t.y-1)),[e.getBottomLeftOf(t)]))),e.exploreFrom(e.getTopCornerCoords(),(t=>(e.get(t).rightIsSolid||o.appendChild(a(t.x,t.y-1)),[e.getBottomRightOf(t)]))),e.exploreFrom(e.getRightBottomCornerCoords(),(t=>(e.get(t).rightIsSolid||o.appendChild(l(t.x+1,t.y)),[e.getTopOf(t)]))),e.exploreFrom(e.getRightBottomCornerCoords(),(t=>(e.get(t).bottomIsSolid||o.appendChild(l(t.x+1,t.y)),[e.getBottomLeftOf(t)]))),e.exploreFrom(e.getLeftBottomCornerCoords(),(t=>(e.get(t).bottomIsSolid||o.appendChild(h(t.x-1,t.y)),[e.getBottomRightOf(t)]))),e.exploreFrom(e.getLeftBottomCornerCoords(),(t=>(e.get(t).leftIsSolid||o.appendChild(h(t.x-1,t.y)),[e.getTopOf(t)]))),o}})),o.register("efatB",(function(e,o){function r(t){return(t>15?"":"0")+t.toString(16)}function n(t){return[t>>16&255,t>>8&255,t>>0&255]}function i(t){const[e,o,r]=t;return e<<16|o<<8|r}function s(t,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(e-t)*o:o<.5?e:o<2/3?t+(e-t)*(2/3-o)*6:t}function l(t){const e=255&t,o=255&(t>>=8);return"#"+r(255&(t>>=8))+r(o)+r(e)}function h(t,e){const o=e(n(function(t){let[e,o,r]=n(t);e/=255,o/=255,r/=255;const s=Math.min(e,o,r),l=Math.max(e,o,r),h=l-s;let a=0,d=0,u=0;return a=0===h?0:l===e?(o-r)/h%6:l===o?(r-e)/h+2:(e-o)/h+4,a=Math.round(60*a),a<0&&(a+=360),u=(l+s)/2,d=0===h?0:h/(1-Math.abs(2*u-1)),d=+(100*d).toFixed(1),u=+(100*u).toFixed(1),i([a/360*255,d/100*255,u/100*255])}(t)));return o[0]=Math.max(0,Math.min(255,Math.round(o[0]))),o[1]=Math.max(0,Math.min(255,Math.round(o[1]))),o[2]=Math.max(0,Math.min(255,Math.round(o[2]))),function(t){let e,o,r,[l,h,a]=n(t);if(l/=255,h/=255,a/=255,0===h)e=o=r=a;else{const t=a<.5?a*(1+h):a+h-a*h,n=2*a-t;e=s(n,t,l+1/3),o=s(n,t,l),r=s(n,t,l-1/3)}return i([Math.floor(255*e),Math.floor(255*o),Math.floor(255*r)])}(i(o))}t(e.exports,"rgbNumberToColorString",(()=>l)),t(e.exports,"transformColorHsl",(()=>h))})),o.register("aCP3q",(function(e,r){t(e.exports,"tag",(()=>a)),t(e.exports,"svgTag",(()=>d));var n=o("hIDiW"),i=o("hsvBG"),s=o("jM5hi");function l(t,e){return t?Array.isArray(t)||(0,i.isRBox)(t)?[{},t]:[t,e]:[{},e]}function h(t,e,o){let r=null;if(e.text){const o=e.text;(0,i.isRBox)(o)&&(r||=(0,n.getBinder)(t)).watch(o,(e=>{t.textContent=e+""})),t.textContent=(0,i.unbox)(o)+""}if(e.on)for(const o in e.on){const r=e.on[o];t.addEventListener(o,r,{passive:!0,capture:!1})}for(const o in e.attrs){const s=e.attrs[o];(0,i.isRBox)(s)&&(r||=(0,n.getBinder)(t)).watch(s,(e=>{null==e?t.removeAttribute(o):t.setAttribute(o,e+"")}));const l=(0,i.unbox)(s);null!=s&&t.setAttribute(o,l+"")}if(o){const e=e=>{const o=e.filter((t=>!!t));!function(t,e){for(let o=0;o<e.length;o++){const r=e[o],n=t.childNodes[o];n!==r&&(n?t.insertBefore(r,n):t.appendChild(r))}for(;t.childNodes[e.length];)t.childNodes[e.length].remove()}(t,o)};(0,i.isRBox)(o)&&(r||=(0,n.getBinder)(t)).watch(o,(t=>{e(t)})),e((0,i.unbox)(o))}return e.class&&(r=(0,s.makeClassname)(r,t,e.class,(e=>t.classList.value=e))||r),r}function a(t,e){const[o,r]=l(t,e),s=document.createElement(o.tagName||"div");let a=h(s,o,r);if(o.style)for(const t in o.style){const e=o.style[t];(0,i.isRBox)(e)&&(a||=(0,n.getBinder)(s)).watch(e,(e=>{s.style[t]=e+""})),s.style[t]=(0,i.unbox)(o.style[t])+""}return s}function d(t,e){const[o,r]=l(t,e),n=document.createElementNS("http://www.w3.org/2000/svg",o.tagName||"g");return"svg"===o.tagName&&n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),h(n,o,r),n}})),o.register("jM5hi",(function(e,r){t(e.exports,"makeClassname",(()=>s));var n=o("hIDiW"),i=o("hsvBG");function s(t,e,o,r){const s=Array.isArray(o)?o:[o];for(const o of s)if((0,i.isRBox)(o))(t||=(0,n.getBinder)(e)).watch(o,l);else if(o&&"object"==typeof o)for(const r in o){const s=o[r];(0,i.isRBox)(s)&&(t||=(0,n.getBinder)(e)).watch(s,l)}function l(){const t=[];for(const e of s)if(e&&"object"==typeof e)for(const o in e)(0,i.unbox)(e[o])&&t.push(o);else{const o=(0,i.unbox)(e);o&&t.push(o)}r(t.join(" "))}return l(),t}})),o.register("kFpLY",(function(e,r){t(e.exports,"getEmptyRhombusPattern",(()=>s)),t(e.exports,"tileWithRandomRhombuses",(()=>l));var n=o("8HcCf"),i=o("6fuK6");const s=t=>{const e=new(0,i.TriangleGrid)({...t,defaultValue:{leftIsSolid:!1,rightIsSolid:!1,bottomIsSolid:!1}}),o=e.getCenterCornerCoords();return e.exploreFrom(o,(t=>(e.set(t,{...e.get(t),bottomIsSolid:!0}),[e.getBottomLeftOf(t),e.getBottomRightOf(t),e.getBottomOf(t)]))),e.exploreFrom(o,(t=>(e.set(t,{...e.get(t),leftIsSolid:!0}),[e.getBottomLeftOf(t),e.getTopLeftOf(t),e.getTopOf(t)]))),e.exploreFrom(o,(t=>(e.set(t,{...e.get(t),rightIsSolid:!0}),[e.getBottomRightOf(t),e.getTopRightOf(t),e.getTopOf(t)]))),e},l=t=>{const e=new Set([(0,i.encodeXY)(t.getCenterCornerCoords())]),o=t=>t.bottomIsSolid&&t.leftIsSolid&&t.rightIsSolid,r=e=>{const r=t.get(e);if(o(r))return!0;if(r.bottomIsSolid||r.leftIsSolid||r.rightIsSolid)return!1;const n=t.getTopOf(e),i=t.getBottomLeftOf(e),s=t.getBottomRightOf(e),l=!t.isCoordValid(n)||t.get(n).bottomIsSolid,h=!t.isCoordValid(i)||t.get(i).rightIsSolid,a=!t.isCoordValid(s)||t.get(s).leftIsSolid;return l&&h&&a},s=(e,o)=>{t.isCoordValid(e)&&t.set(e,o(t.get(e)))},l=n=>{const l=t.get(n);s(t.getBottomLeftOf(n),(t=>({...t,rightIsSolid:!t.rightIsSolid}))),s(t.getBottomRightOf(n),(t=>({...t,leftIsSolid:!t.leftIsSolid}))),s(t.getTopOf(n),(t=>({...t,bottomIsSolid:!t.bottomIsSolid}))),t.set(n,(t=>o(t)?{leftIsSolid:!1,rightIsSolid:!1,bottomIsSolid:!1}:{leftIsSolid:!0,rightIsSolid:!0,bottomIsSolid:!0})(l)),(o=>{for(const n of t.getValidNeighbourCoords(o)){const t=(0,i.encodeXY)(n);r(n)?e.add(t):e.delete(t)}})(n)};for(let o=0;o<1*t.count;o++){if(0===e.size){console.log("no flip candidate????");break}n.performeter.enterBlock("copy set");const t=[...e];n.performeter.exitEnterBlock("flip");l((0,i.decodeXY)(t[Math.floor(Math.random()*t.length)])),n.performeter.exitBlock()}}})),o.register("8HcCf",(function(e,o){t(e.exports,"performeter",(()=>r));const r=new class{root=this.makeBlock(null);currentBlock=this.root;eventCounters={};makeBlock(t){return{subblocks:{},parent:t,timeStart:-1,timeSum:0,enterCount:0}}enterBlock(t){let e=this.currentBlock.subblocks[t];e||(e=this.makeBlock(this.currentBlock),this.currentBlock.subblocks[t]=e),e.timeStart=performance.now(),e.enterCount++,this.currentBlock=e}recordEvent(t){this.eventCounters[t]=(this.eventCounters[t]??0)+1}exitBlock(){this.currentBlock.timeSum+=performance.now()-this.currentBlock.timeStart;const t=this.currentBlock.parent;if(!t)throw new Error("No parent! Blocks are all messed up.");this.currentBlock=t}exitEnterBlock(t){this.exitBlock(),this.enterBlock(t)}print(){const t={};let e=0;for(const t in this.root.subblocks)e+=this.root.subblocks[t].timeSum;this.forEachBlock(((o,r,i)=>{r=new Array(i+1).join("-")+r,t[r]={"parent %":n(o.timeSum/o.parent.timeSum*100),"full %":n(o.timeSum/e*100),"ms per enter":n(o.timeSum/o.enterCount)}})),console.table(t),console.table(this.eventCounters)}reset(){this.root=this.makeBlock(null),this.currentBlock=this.root,this.eventCounters={}}forEachBlock(t,e=this.root,o=0){for(const r in e.subblocks){const n=e.subblocks[r];t(n,r,o),this.forEachBlock(t,n,o+1)}}};function n(t){return Math.round(100*t)/100}})),o.register("6fuK6",(function(e,r){t(e.exports,"encodeXY",(()=>i)),t(e.exports,"decodeXY",(()=>s)),t(e.exports,"TriangleGrid",(()=>l));var n=o("6A5Hp");const i=t=>t.y<<16|t.x,s=t=>({x:65535&t,y:t>>16});class l{constructor(t){if(this.props=t,t.width<1||t.height<1||t.length<1||t.width%1||t.height%1||t.length%1)throw new Error(`Incorrect grid dimensions: ${t.length} x ${t.width} x ${t.height}`);this.xWidth=t.length+t.width-1,this.yHeight=this.xWidth/2+t.height,this.topCornerColumnX=this.props.width-1;let e=0;this.values=new Array(this.xWidth).fill(null).map(((o,r)=>{const n=this.getHeightOfColumnAt(r);return e+=n,new Array(n).fill(null).map((()=>t.defaultValue))})),this.count=e}getHeightOfColumnAt(t){let e=this.props.height;return t<this.props.length&&t<this.props.width?e+=t:t<this.props.length!=t<this.props.width?e+=Math.min(this.props.length,this.props.width)-1:e+=this.xWidth-1-t,e}*[Symbol.iterator](){for(let t=0;t<this.values.length;t++){const e=this.values[t];for(let o=0;o<e.length;o++)yield{x:t,y:o,value:e[o]}}}getVerticalOffset(t){const e=this.props.length-1;return Math.abs(e-t)/2}getCenterCornerCoords(){return{x:this.topCornerColumnX,y:this.props.height-1}}getTopCornerCoords(){return{x:this.topCornerColumnX,y:0}}getLeftBottomCornerCoords(){return{x:0,y:this.values[0].length-1}}getRightBottomCornerCoords(){return{x:this.values.length-1,y:this.values[this.values.length-1].length-1}}isCoordValid(t){if(t.x<0||t.y<0)return!1;const e=this.values[t.x];return!!e&&e.length>t.y}throwOnInvalidCoords(t){if(!this.isCoordValid(t))throw new Error(`Asked for value at ${t.x}, ${t.y}, but container only has ${this.values.length} columns, and this column ${this.values.length>t.x?`contains only ${this.values[t.x].length} rows`:"does not exist"}.`)}get(t){return this.throwOnInvalidCoords(t),this.values[t.x][t.y]}set(t,e){this.values[t.x][t.y]=e}getTopLeftOf({x:t,y:e}){return{x:t-1,y:t<=this.topCornerColumnX?e-1:e}}getBottomLeftOf({x:t,y:e}){return{x:t-1,y:t<=this.topCornerColumnX?e:e+1}}getTopRightOf({x:t,y:e}){return{x:t+1,y:t<this.topCornerColumnX?e:e-1}}getBottomRightOf({x:t,y:e}){return{x:t+1,y:t<this.topCornerColumnX?e+1:e}}getTopOf({x:t,y:e}){return{x:t,y:e-1}}getBottomOf({x:t,y:e}){return{x:t,y:e+1}}getValidNeighbourCoords(t){return[this.getTopOf(t),this.getBottomOf(t),this.getTopLeftOf(t),this.getTopRightOf(t),this.getBottomLeftOf(t),this.getBottomRightOf(t)].filter((t=>this.isCoordValid(t)))}exploreFrom(t,e){const o=new(0,n.Queue),r=new Set;let s=t;for(;s;){const t=e(s);for(const e of t){if(!this.isCoordValid(e))continue;const t=i(e);r.has(t)||(r.add(t),o.enqueue(e))}s=o.maybeDequeue()}}}})),o.register("6A5Hp",(function(e,o){t(e.exports,"Queue",(()=>r));class r{len=0;get length(){return this.len}get head(){return this.headNode?.value}get tail(){return this.tailNode?.value}enqueue(t){if(this.headNode&&this.tailNode){const e=this.tailNode;this.tailNode={value:t},e.prev=this.tailNode}else this.headNode=this.tailNode={value:t};this.len++}dequeue(){if(!this.headNode)throw new Error("Queue empty, cannot dequeue.");const t=this.headNode.value;return this.headNode=this.headNode.prev,this.len--,t}maybeDequeue(){if(!this.headNode)return;const t=this.headNode.value;return this.headNode=this.headNode.prev,this.len--,t}clear(){this.len=0,this.headNode=this.tailNode=void 0}toArrayHeadFirst(){const t=new Array(this.len);let e=this.headNode,o=0;for(;e;)t[o++]=e.value,e=e.prev;return t}}})),o.register("kxLP6",(function(r,n){t(r.exports,"getWasmRhombusRandomiser",(()=>s));var i=o("9qvFf");const s=async()=>{const{instance:t}=await WebAssembly.instantiateStreaming(fetch(e(i)));return t.exports}})),o.register("9qvFf",(function(t,e){t.exports=new URL(o("27Lyk").resolve("d9iEL"),import.meta.url).toString()})),o.register("27Lyk",(function(e,o){var r,n;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>n),(t=>n=t));var i={};r=function(t){for(var e=Object.keys(t),o=0;o<e.length;o++)i[e[o]]=t[e[o]]},n=function(t){var e=i[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}}));
//# sourceMappingURL=random_rhombus_tilings.eee9c95d.js.map
